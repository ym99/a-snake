<html>
    <head>
        <meta charset="utf-8" />
        <meta http-equiv="cache-control" content="max-age=0"/>
        <meta http-equiv="cache-control" content="no-cache" />
        <meta http-equiv="expires" content="0" />
        <meta http-equiv="expires" content="Tue, 01 Jan 1980 1:00:00 GMT"/>
        <meta http-equiv="pragma" content="no-cache" />
        <meta name="viewport" content="width=350">

        <style>
        body {
            margin: 0;
        }
        #main{
            border-spacing: 0; 
            border-collapse: separate;
            
        }

        #main td{
            border: solid 1px #dddddd;
            width: 10px;
            height: 10px;
        
            border-radius: 5px;
         
        }

        #main td.snake-head{
            border: solid 1px #02a302;
             }
        #main td.snake-body{
            border: solid 1px #015e01;
        }     

        </style>

        <script>
            document.addEventListener("DOMContentLoaded", function(event) {
                var maxCells = Math.floor((window.innerWidth - 2) / 10);
                var maxRows = Math.floor((window.innerHeight - 2) / 10);
                
                var table = document.getElementById("main");
                var r = 0;
                while(r < maxRows) {
                    var row = table.insertRow(table.rows.length-1);
                    var c = 0;
                    while (c < maxCells){
                        var cell = row.insertCell(row.cells.length-1);
                        
                        c = c + 1;
                    }
                    r = r + 1;  
                }

                var snake = [];
                snake.push({
                    x: 10, 
                    y: 10
                });
                /*snake.push({
                    x: 9,
                    y: 10
                });
                snake.push({
                    x: 8,
                    y: 10
                });*/
                function showSnake(){
                    var snakeHead = snake[0];
                    var table = document.getElementById("main");
                    var row = table.rows[ snakeHead.y ];
                    var cell = row.cells[ snakeHead.x ];
                    cell.classList.add("snake-head");
                     
                    var i = 1;
                    while (i<snake.length){
                        var snakeBody = snake[i];
                        var row = table.rows[ snakeBody.y ];
                        var cell = row.cells[ snakeBody.x ];
                        cell.classList.add("snake-body");
                        i = i + 1;
                    }    
                }
                function hideSnake(){
                    var snakeHead = snake[0];
                    var table = document.getElementById("main");
                    var row = table.rows[ snakeHead.y ];
                    var cell = row.cells[ snakeHead.x ];
                    cell.classList.remove("snake-head");
                     
                    var i = 1;
                    while (i<snake.length){
                        var snakeBody = snake[i];
                        var row = table.rows[ snakeBody.y ];
                        var cell = row.cells[ snakeBody.x ];
                        cell.classList.remove("snake-body");
                        i = i + 1;
                    }    
                }


                showSnake();
               var delta = {
                   x:1,
                   y:0,
               }

               document.addEventListener("keydown", (e) => {
                    e = e || window.event;

                    if (e.keyCode === 38) { // up
                        delta = {
                            x:0,
                            y:-1
                        };
                    }

                    if (e.keyCode === 40) { // down
                        delta = {
                            x:0,
                            y:1
                        };
                    }

                    if (e.keyCode === 37) { // left
                        delta = {
                         x:-1,
                         y:0
                        };
                    }

                    if (e.keyCode === 39) { // right
                        delta = {
                            x:1,
                            y:0
                        };
                    }
               });

                window.setInterval(() => {
                    hideSnake();
                 
                    var snakeHead = snake[0];
                    snake[0] = {
                        x: snakeHead.x + delta.x,
                        y: snakeHead.y + delta.y    
                    };

                    showSnake();
                }, 500)
            });
        </script>
    </head>
    <body   >
            
        <table id="main"></table>
        
        
    </body>

</html>